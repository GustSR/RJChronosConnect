# =================================================================
# Dockerfile de DESENVOLVIMENTO para o Frontend (Vite + React)
# =================================================================

# Estágio 1: Usar uma imagem base do Bun leve e específica
FROM oven/bun:latest AS development

# Definir o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copiar os arquivos de manifesto de pacote PRIMEIRO
# Isso otimiza o cache do Docker. A instalação do Bun só será
# executada novamente se estes arquivos mudarem.
COPY package.json ./

# Instalar as dependências do projeto
RUN bun install

# Copiar todo o resto do código-fonte do frontend
# COPY . . # Removido para usar bind mounts no docker-compose.dev.yml

# Expor a porta padrão do Vite para o ambiente Docker
# O mapeamento final será feito no docker-compose.yml
EXPOSE 3000

# Comando para iniciar o servidor de desenvolvimento do Vite
# O script "dev" já contém o "--host" necessário para o Docker.
CMD ["bun", "run", "dev"]
