# =================================================================
# Dockerfile de DESENVOLVIMENTO para o Frontend (Vite + React)
# =================================================================

# Estágio 1: Usar uma imagem base do Node.js leve e específica
# Usamos a versão 20, conforme indicado pelas dependências de desenvolvimento.
# 'alpine' é uma versão mínima, ideal para desenvolvimento e produção.
FROM node:20-alpine AS development

# Definir o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copiar os arquivos de manifesto de pacote PRIMEIRO
# Isso otimiza o cache do Docker. A instalação do NPM só será
# executada novamente se estes arquivos mudarem.
COPY package*.json ./

# Instalar as dependências do projeto
RUN npm install

# Copiar todo o resto do código-fonte do frontend
COPY . .

# Expor a porta padrão do Vite para o ambiente Docker
# O mapeamento final será feito no docker-compose.yml
EXPOSE 5173

# Comando para iniciar o servidor de desenvolvimento do Vite
# O script "dev" já contém o "--host" necessário para o Docker.
CMD ["npm", "run", "dev"]
